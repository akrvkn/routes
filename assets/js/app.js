(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(t,e,n){t.exports=n(4)},function(t,e,n){"use strict";n.r(e);var a=n(1),i=n(0),u=n(2);function l(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,i=!1,u=void 0;try{for(var l,o=t[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!e||n.length!==e);a=!0);}catch(t){i=!0,u=t}finally{try{a||null==o.return||o.return()}finally{if(i)throw u}}return n}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function m(t){var e="";if(location.search)for(var n=location.search.substr(1).split("&"),a=0;a<n.length;a++){var i=n[a].split("=");i[0]===t&&(e=decodeURIComponent(i[1]))}return e}var s=[{name:"Москва (СРВ)",latitude:55.850701,longitude:37.465197},{name:"Лесное",latitude:56.074284,longitude:37.662723},{name:"Дубна",latitude:56.744002,longitude:37.173203},{name:"Тверь",latitude:56.862808,longitude:35.913654},{name:"Кимры",latitude:56.871781,longitude:37.363423},{name:"Калязин",latitude:57.240412,longitude:37.855078},{name:"Углич",latitude:57.52234,longitude:38.30391},{name:"Мышкин",latitude:57.784019,longitude:38.45456},{name:"Коприно",latitude:58.065349,longitude:38.324569},{name:"Череповец",latitude:59.129209,longitude:37.907906},{name:"Кузино",latitude:59.763509,longitude:38.281075},{name:"Горицы",latitude:59.869734,longitude:38.260342},{name:"Вытегра",latitude:61.010869,longitude:36.434714},{name:"Онежское озеро",latitude:61.627103,longitude:35.472113},{name:"Вознесенье",latitude:61.013554,longitude:35.484963},{name:"Повенец",latitude:62.848879,longitude:34.829407},{name:"Соловецкие острова",latitude:65.1,longitude:35.683333},{name:"Кижи",latitude:62.066667,longitude:35.238056},{name:"Петрозаводск",latitude:61.788863,longitude:34.359724},{name:"Мандроги",latitude:60.897704,longitude:33.817788},{name:"Лодейное поле",latitude:60.734267,longitude:33.555964},{name:"Старая Ладога",latitude:59.995076,longitude:32.294347},{name:"Великий Новгород",latitude:58.536742,longitude:31.271227},{name:"Валаам",latitude:61.366667,longitude:30.933333},{name:"Сортавала",latitude:61.702943,longitude:30.691633},{name:"о.Хонкасало",latitude:61.620556,longitude:30.827315},{name:"о.Карнетсаари",latitude:61.613165,longitude:30.875833},{name:"о.Орьятсаари",latitude:61.6223,longitude:30.896925},{name:"о.Тулолансаари",latitude:61.673873,longitude:30.889811},{name:"о.Карпансаари",latitude:61.660201,longitude:30.972662},{name:"о.Мякисало",latitude:61.680169,longitude:31.019105},{name:"о.Пеллотсаари",latitude:61.638904,longitude:31.030388},{name:"о.Келло",latitude:61.58815,longitude:31.033981},{name:"Коневец",latitude:60.86016,longitude:30.61012},{name:"Ладожское озеро",latitude:60.529839,longitude:31.802681},{name:"Шлиссельбург",latitude:59.955504,longitude:31.048894},{name:"Санкт-Петербург",latitude:59.90802,longitude:30.409998},{name:"Рыбинск",latitude:58.043047,longitude:38.85719},{name:"Тутаев",latitude:57.874612,longitude:39.540117},{name:"Ярославль",latitude:57.633568,longitude:39.879512},{name:"Кострома",latitude:57.771284,longitude:40.950603},{name:"Плёс",latitude:57.453764,longitude:41.507726},{name:"Кинешма",latitude:57.450688,longitude:42.171442},{name:"Юрьевец",latitude:57.357648,longitude:43.15438},{name:"Чкаловск",latitude:56.776495,longitude:43.292538},{name:"Городец",latitude:56.646093,longitude:43.441371},{name:"Н.Новгород",latitude:56.331513,longitude:43.98719},{name:"Макарьево",latitude:56.087142,longitude:45.060079},{name:"Козьмодемьянск",latitude:56.346401,longitude:46.538972},{name:"Павлово",latitude:55.967934,longitude:43.058115},{name:"Муром",latitude:55.581164,longitude:42.067693},{name:"Касимов",latitude:54.934541,longitude:41.383931},{name:"Рязань",latitude:54.629148,longitude:39.734928},{name:"Коломна",latitude:55.108083,longitude:38.756228},{name:"Константиново",latitude:55.487887,longitude:37.982154},{name:"Москва (ЮРВ)",latitude:55.688632,longitude:37.676137},{name:"Козьмодемьянск",latitude:56.332705,longitude:46.547541},{name:"Чебоксары",latitude:56.157355,longitude:47.260902},{name:"Казань",latitude:55.788826,longitude:49.076793},{name:"Ульяновск",latitude:54.310837,longitude:48.434609},{name:"Тольятти",latitude:53.521911,longitude:49.435092},{name:"Самара",latitude:53.215947,longitude:50.115319},{name:"Усовка",latitude:51.791925,longitude:46.49031},{name:"Саратов",latitude:51.534272,longitude:46.01014},{name:"Волгоград",latitude:48.711923,longitude:44.491084},{name:"Ахтуба",latitude:48.215219,longitude:46.102148},{name:"Астрахань",latitude:46.333818,longitude:48.021857},{name:"Ростов-на-Дону",latitude:47.261008,longitude:39.628},{name:"Камское Устье",latitude:55.214493,longitude:49.382481},{name:"Чистополь",latitude:55.391549,longitude:50.632176},{name:"Нижнекамск",latitude:55.6572,longitude:51.702794},{name:"Елабуга",latitude:55.734021,longitude:52.025246},{name:"Набережные Челны",latitude:55.758758,longitude:52.348239},{name:"Сарапул",latitude:56.461621,longitude:53.803678},{name:"Чайковский",latitude:56.800858,longitude:54.088191},{name:"Болгары",latitude:57.729848,longitude:55.387889},{name:"Пермь",latitude:58.001985,longitude:56.257287},{name:"Уфа",latitude:54.809866,longitude:56.093911}],g=["Москва (СРВ)",[["Лесное",[["Дубна",[["Тверь"],["Калязин",[["Углич",[["Мышкин",[["Коприно",[["Череповец",[["Кузино",[["Горицы",[["Вытегра",[["Онежское озеро",[["Кижи"],["Петрозаводск"],["Повенец",[["Сосновец",[["Соловецкие острова"]]]]],["Вознесенье",[["Мандроги",[["Лодейное поле",[["Старая Ладога",[["Великий Новгород"]]],["Ладожское озеро",[["Валаам"],["Коневец"],["Сортавала"],["Шлиссельбург",[["Санкт-Петербург"]]]]]]]]]]]]]]]]]]]]],["Рыбинск",[["Тутаев",[["Ярославль",[["Кострома",[["Плёс",[["Кинешма",[["Юрьевец",[["Чкаловск",[["Городец",[["Н.Новгород",[["Макарьево",[["Козьмодемьянск",[["Чебоксары",[["Казань",[["Камское Устье",[["Чистополь",[["Нижнекамск",[["Елабуга",[["Набережные Челны",[["Сарапул",[["Чайковский",[["Болгары",[["Пермь"]]]]]]]]]]]]]]]]],["Ульяновск",[["Тольятти",[["Самара",[["Усовка",[["Саратов",[["Волгоград",[["Ахтуба",[["Астрахань"]]],["Ростов-на-Дону"]]]]]]]]]]]]]]]]]]]]],["Павлово",[["Муром",[["Касимов",[["Рязань",[["Коломна",[["Константиново",[["Москва (ЮРВ)"]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]],c=[[61.698935,30.69642],[61.678964,30.713447],[61.667382,30.692677],[61.640386,30.696831],[61.599649,30.79099],[61.59259,30.834671],[61.611857,30.867297],[61.624059,30.863296],[61.688135,30.82631],[61.709127,30.843476],[61.700122,30.943785],[61.671332,30.984925],[61.67052,31.005696],[61.647541,31.041101],[61.636958,31.066131],[61.588177,31.034925]],f=[{name:"Сортавала",latitude:61.702943,longitude:30.691633},{name:"о.Хонкасало",latitude:61.620556,longitude:30.827315},{name:"о.Карнетсаари",latitude:61.613165,longitude:30.875833},{name:"о.Орьятсаари",latitude:61.6223,longitude:30.896925},{name:"о.Тулолансаари",latitude:61.673873,longitude:30.889811},{name:"о.Карпансаари",latitude:61.660201,longitude:30.972662},{name:"о.Мякисало",latitude:61.680169,longitude:31.019105},{name:"о.Пеллотсаари",latitude:61.638904,longitude:31.030388},{name:"о.Келло",latitude:61.58815,longitude:31.033981}];function p(t){var e=[];return t.forEach((function(t){t&&e.push(t)})),e}!function(){var t=""===m("tour")?"":m("tour"),e=m("online"),n=m("ostrova");console.log(n),""!==n&&(d=i.map("map").setView([61.698935,30.69642],8),i.polyline(c,{color:"#0962a8"}).addTo(d),i.tileLayer("https://vec{s}.maps.yandex.net/tiles?l=map&v=20.10.06-1&z={z}&x={x}&y={y}&scale=2&lang=ru_RU",{subdomains:["01","02","03","04"],attribution:'<a href="https://yandex.ru" target="_blank">Яндекс</a>',reuseTiles:!0,updateWhenIdle:!1}).addTo(d),d.options.crs=i.CRS.EPSG3395,i.Icon.Default.imagePath="assets/lib/images/",f.forEach((function(t){i.marker([t.latitude,t.longitude]).addTo(d)})),d.fitBounds(c));var d;if(""!==t){fetch("https://api.mosturflot.ru/v3/rivercruises/tours/"+t+"?fields[tours]=route").then((function(t){return t.json()})).then((function(t){!function(t){fetch("assets/js/points.json").then((function(t){return t.json()})).then((function(e){!function(t,e){var n=[],u=[];t.data.map((function(t){e.map((function(e){var a={};e.indexOf(t.attributes.name)>-1&&(a.name=e,a.id=t.id,a.description=null===t.attributes.description?"":t.attributes.description,-1===u.indexOf(e)&&(u.push(e),n.push(a)))}))})),function(t,e){var n=[],u=[],d=[];t.map((function(r,m){if(r&&s.map((function(t,a){r.indexOf(t.name)>-1&&(e.forEach((function(e){e.name.indexOf(t.name)>-1&&(e.latlng=[t.latitude,t.longitude],d.push(e))})),n[a]=t)})),t.length===m+1){var c=p(n),f=[];c.forEach((function(t){var e=function(t,e,n){var i=function t(e,n,a,i){var u=o(e,2),d=u[0],r=u[1];return d===n?[].concat(l(a),[d]):r?r.reduce((function(e,i){return t(i,n,[].concat(l(a),[d]),e)}),i):i},u=i(t,e,[],[]),d=i(t,n,[],[]),r=Object(a.intersection)(u,d),m=r[r.length-1],s=Object(a.reverse)(Object(a.difference)(u,d)),g=Object(a.difference)(d,u);return Object(a.concat)(s,[m],g)}(g,c[0].name,t.name),n=_.difference(e,f);f.push.apply(f,l(n))})),f.map((function(t,e){(t&&s.map((function(e){t.indexOf(e.name)>-1&&-1===e.name.indexOf("озеро")&&u.push([e.latitude,e.longitude])})),f.length===e+1)&&function(t,e){var n=i.map("map").setView([55.850701,37.465197],8);i.polyline(t,{color:"#00ffff"}).addTo(n),i.tileLayer("https://vec{s}.maps.yandex.net/tiles?l=map&v=20.10.06-1&z={z}&x={x}&y={y}&scale=2&lang=ru_RU",{subdomains:["01","02","03","04"],attribution:'<a href="https://yandex.ru" target="_blank">Яндекс</a>',reuseTiles:!0,updateWhenIdle:!1}).addTo(n),n.options.crs=i.CRS.EPSG3395,i.Icon.Default.imagePath="assets/lib/images/";var a=[];e.forEach((function(t){a.push(t.latlng);var e="<b>"+t.name+'</b><br><img alt="Стоянка" src="./assets/img/mtf/st/'+t.id+'.jpg" style="width: 250px;"><div style="height: 200px; overflow-y: scroll;">'+t.description+"</div>";i.marker(t.latlng).bindPopup(e).addTo(n),n.fitBounds(a)}))}(p(u),d)}))}}))}(e,n)}(e,t)}))}(t.data.attributes.route.split(" - "))}))}if("1"===e){fetch("https://www.superuser.su/services/online.php").then((function(t){return t.json()})).then((function(t){!function(t){var e=i.map("map").setView([55.850701,37.465197],10);i.tileLayer("https://vec{s}.maps.yandex.net/tiles?l=map&v=20.10.06-1&z={z}&x={x}&y={y}&scale=2&lang=ru_RU",{subdomains:["01","02","03","04"],attribution:'<a href="https://yandex.ru" target="_blank">Яндекс</a>',reuseTiles:!0,updateWhenIdle:!1}).addTo(e),e.options.crs=i.CRS.EPSG3395;var n=new u.a,a=[],l=i.icon({iconUrl:"assets/img/mtf/marker-ship.png",iconSize:[64,64],iconAnchor:[22,64]});(function(t){t.forEach((function(t){var e=t.name+"<br><a href='https://www.mosturflot.ru/api/ajax/image.php?src="+t.name+"' target='_blank'><img alt=\"Теплоход\" src=\"https://www.mosturflot.ru/api/ajax/image.php?src="+t.name+'" style="width: 250px;"></a>',u=new i.Marker([t.latitude,t.longitude],{icon:l}).bindPopup(e);a.push([t.latitude,t.longitude]),n.addLayer(u)}))})(t),e.addLayer(n),e.fitBounds(a,{padding:[40,40]})}(t)}))}}()}],[[3,1,2]]]);